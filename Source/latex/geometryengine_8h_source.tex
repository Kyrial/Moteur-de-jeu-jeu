\hypertarget{geometryengine_8h_source}{}\doxysection{geometryengine.\+h}
\mbox{\hyperlink{geometryengine_8h}{Aller à la documentation de ce fichier.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{1 \textcolor{comment}{/****************************************************************************}}
\DoxyCodeLine{2 \textcolor{comment}{**}}
\DoxyCodeLine{3 \textcolor{comment}{** Copyright (C) 2016 The Qt Company Ltd.}}
\DoxyCodeLine{4 \textcolor{comment}{** Contact: https://www.qt.io/licensing/}}
\DoxyCodeLine{5 \textcolor{comment}{**}}
\DoxyCodeLine{6 \textcolor{comment}{** This file is part of the QtCore module of the Qt Toolkit.}}
\DoxyCodeLine{7 \textcolor{comment}{**}}
\DoxyCodeLine{8 \textcolor{comment}{** \$QT\_BEGIN\_LICENSE:BSD\$}}
\DoxyCodeLine{9 \textcolor{comment}{** Commercial License Usage}}
\DoxyCodeLine{10 \textcolor{comment}{** Licensees holding valid commercial Qt licenses may use this file in}}
\DoxyCodeLine{11 \textcolor{comment}{** accordance with the commercial license agreement provided with the}}
\DoxyCodeLine{12 \textcolor{comment}{** Software or, alternatively, in accordance with the terms contained in}}
\DoxyCodeLine{13 \textcolor{comment}{** a written agreement between you and The Qt Company. For licensing terms}}
\DoxyCodeLine{14 \textcolor{comment}{** and conditions see https://www.qt.io/terms-\/conditions. For further}}
\DoxyCodeLine{15 \textcolor{comment}{** information use the contact form at https://www.qt.io/contact-\/us.}}
\DoxyCodeLine{16 \textcolor{comment}{**}}
\DoxyCodeLine{17 \textcolor{comment}{** BSD License Usage}}
\DoxyCodeLine{18 \textcolor{comment}{** Alternatively, you may use this file under the terms of the BSD license}}
\DoxyCodeLine{19 \textcolor{comment}{** as follows:}}
\DoxyCodeLine{20 \textcolor{comment}{**}}
\DoxyCodeLine{21 \textcolor{comment}{** "{}Redistribution and use in source and binary forms, with or without}}
\DoxyCodeLine{22 \textcolor{comment}{** modification, are permitted provided that the following conditions are}}
\DoxyCodeLine{23 \textcolor{comment}{** met:}}
\DoxyCodeLine{24 \textcolor{comment}{**   * Redistributions of source code must retain the above copyright}}
\DoxyCodeLine{25 \textcolor{comment}{**     notice, this list of conditions and the following disclaimer.}}
\DoxyCodeLine{26 \textcolor{comment}{**   * Redistributions in binary form must reproduce the above copyright}}
\DoxyCodeLine{27 \textcolor{comment}{**     notice, this list of conditions and the following disclaimer in}}
\DoxyCodeLine{28 \textcolor{comment}{**     the documentation and/or other materials provided with the}}
\DoxyCodeLine{29 \textcolor{comment}{**     distribution.}}
\DoxyCodeLine{30 \textcolor{comment}{**   * Neither the name of The Qt Company Ltd nor the names of its}}
\DoxyCodeLine{31 \textcolor{comment}{**     contributors may be used to endorse or promote products derived}}
\DoxyCodeLine{32 \textcolor{comment}{**     from this software without specific prior written permission.}}
\DoxyCodeLine{33 \textcolor{comment}{**}}
\DoxyCodeLine{34 \textcolor{comment}{**}}
\DoxyCodeLine{35 \textcolor{comment}{** THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS}}
\DoxyCodeLine{36 \textcolor{comment}{** "{}AS IS"{} AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT}}
\DoxyCodeLine{37 \textcolor{comment}{** LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR}}
\DoxyCodeLine{38 \textcolor{comment}{** A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT}}
\DoxyCodeLine{39 \textcolor{comment}{** OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,}}
\DoxyCodeLine{40 \textcolor{comment}{** SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT}}
\DoxyCodeLine{41 \textcolor{comment}{** LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,}}
\DoxyCodeLine{42 \textcolor{comment}{** DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY}}
\DoxyCodeLine{43 \textcolor{comment}{** THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT}}
\DoxyCodeLine{44 \textcolor{comment}{** (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE}}
\DoxyCodeLine{45 \textcolor{comment}{** OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE."{}}}
\DoxyCodeLine{46 \textcolor{comment}{**}}
\DoxyCodeLine{47 \textcolor{comment}{** \$QT\_END\_LICENSE\$}}
\DoxyCodeLine{48 \textcolor{comment}{**}}
\DoxyCodeLine{49 \textcolor{comment}{****************************************************************************/}}
\DoxyCodeLine{50 }
\DoxyCodeLine{51 \textcolor{preprocessor}{\#ifndef GEOMETRYENGINE\_H}}
\DoxyCodeLine{52 \textcolor{preprocessor}{\#define GEOMETRYENGINE\_H}}
\DoxyCodeLine{53 }
\DoxyCodeLine{54 \textcolor{preprocessor}{\#include <QOpenGLFunctions\_4\_1\_Core>}}
\DoxyCodeLine{55 \textcolor{preprocessor}{\#include <QOpenGLShaderProgram>}}
\DoxyCodeLine{56 \textcolor{preprocessor}{\#include <QOpenGLBuffer>}}
\DoxyCodeLine{57 \textcolor{preprocessor}{\#include <QtGui/QImage>}}
\DoxyCodeLine{58 \textcolor{preprocessor}{\#include <QVector2D>}}
\DoxyCodeLine{59 \textcolor{preprocessor}{\#include <QVector3D>}}
\DoxyCodeLine{60 }
\DoxyCodeLine{61 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{_basic_i_o_8h}{BasicIO.h}}"{}}}
\DoxyCodeLine{62 }
\DoxyCodeLine{63 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{transform_8h}{transform.h}}"{}}}
\DoxyCodeLine{64 }
\DoxyCodeLine{65 \textcolor{keyword}{struct }\mbox{\hyperlink{struct_vertex_data}{VertexData}}}
\DoxyCodeLine{66 \{}
\DoxyCodeLine{67     QVector3D position;}
\DoxyCodeLine{68     QVector3D texCoord;}
\DoxyCodeLine{69 \};}
\DoxyCodeLine{70 }
\DoxyCodeLine{74 \textcolor{keyword}{struct }\mbox{\hyperlink{struct_min_max}{MinMax}}}
\DoxyCodeLine{75 \{}
\DoxyCodeLine{76     QVector3D BBMin =QVector3D(0,0,0);}
\DoxyCodeLine{77     QVector3D BBMax = QVector3D(0,0,0);}
\DoxyCodeLine{78 \};}
\DoxyCodeLine{79 }
\DoxyCodeLine{88 \textcolor{keyword}{class }\mbox{\hyperlink{class_geometry_engine}{GeometryEngine}} : \textcolor{keyword}{protected} QOpenGLFunctions\_4\_1\_Core}
\DoxyCodeLine{89 \{}
\DoxyCodeLine{90 }
\DoxyCodeLine{91 \textcolor{keyword}{public}:}
\DoxyCodeLine{92     \textcolor{keywordtype}{bool} withTextureCoord = \textcolor{keyword}{false};}
\DoxyCodeLine{93     QVector<MinMax> internbbInstenced;}
\DoxyCodeLine{94 }
\DoxyCodeLine{95     QVector3D coordLastCollision = QVector3D(999,999,999);}
\DoxyCodeLine{96     QVector2D lastCentre = QVector2D(0,0);}
\DoxyCodeLine{97 }
\DoxyCodeLine{101     QVector3D \mbox{\hyperlink{class_geometry_engine_a2bf5f70717c9b705eaa3cb03a4ea8817}{BBMin}} = QVector3D(0,0,0);}
\DoxyCodeLine{105     QVector3D \mbox{\hyperlink{class_geometry_engine_a78b4e00e91e8328f70831ea0fc57f913}{BBMax}} = QVector3D(0,0,0);}
\DoxyCodeLine{109     QVector3D \mbox{\hyperlink{class_geometry_engine_a76c992c2008b41884c7ff5582aee8ecb}{internBBMin}} = QVector3D(0,0,0);}
\DoxyCodeLine{113     QVector3D \mbox{\hyperlink{class_geometry_engine_ade5babdb40e066b86e562d2f8ec4b84a}{internBBMax}} = QVector3D(0,0,0);}
\DoxyCodeLine{114     \textcolor{keywordtype}{bool} withNormal = \textcolor{keyword}{false};}
\DoxyCodeLine{115     \textcolor{keywordtype}{bool} heightMap = \textcolor{keyword}{false};}
\DoxyCodeLine{116     \textcolor{keywordtype}{bool} noCollision = \textcolor{keyword}{false};}
\DoxyCodeLine{117     \textcolor{keywordtype}{float} precisionTexture=1;}
\DoxyCodeLine{118 }
\DoxyCodeLine{119     QOpenGLBuffer arrayBuf;}
\DoxyCodeLine{120     QOpenGLBuffer indexBuf;}
\DoxyCodeLine{124     QVector<QMatrix4x4> \mbox{\hyperlink{class_geometry_engine_aefc60d943da86585b8dbc4dd8168338f}{modelMatrices}};}
\DoxyCodeLine{125 }
\DoxyCodeLine{126     \textcolor{keywordtype}{int} triangle\_strip = 0; \textcolor{comment}{// 0 = triangle\_strip // 1 = triangle // 2 = patch}}
\DoxyCodeLine{127 }
\DoxyCodeLine{128 }
\DoxyCodeLine{129     \mbox{\hyperlink{class_geometry_engine_a79b2b062df3f9cf3284d745c70ab61cc}{GeometryEngine}}();}
\DoxyCodeLine{130     \textcolor{keyword}{virtual} \mbox{\hyperlink{class_geometry_engine}{\string~GeometryEngine}}();}
\DoxyCodeLine{135     \textcolor{keyword}{virtual} \textcolor{keywordtype}{void} \mbox{\hyperlink{class_geometry_engine_a9668fa4c753c20e6a7aae1244213296f}{drawCubeGeometry}}(QOpenGLShaderProgram *program);}
\DoxyCodeLine{143     \textcolor{keyword}{virtual} \textcolor{keywordtype}{void} \mbox{\hyperlink{class_geometry_engine_af31f9d14bd10631316f44d523855f622}{initMesh}}(std::string filename, \textcolor{keywordtype}{bool} collisionActivated= \textcolor{keyword}{true},\textcolor{keywordtype}{bool} centre= \textcolor{keyword}{false}, \textcolor{keywordtype}{bool} inverse = \textcolor{keyword}{false})\{\}}
\DoxyCodeLine{144     \textcolor{keyword}{virtual} \textcolor{keywordtype}{void} initMeshObj(std::string filename,\textcolor{keywordtype}{bool} collisionActivated= \textcolor{keyword}{true},\textcolor{keywordtype}{bool} centre= \textcolor{keyword}{false}, \textcolor{keywordtype}{bool} inverse = \textcolor{keyword}{false})\{\}}
\DoxyCodeLine{145     \textcolor{keyword}{virtual} \textcolor{keywordtype}{void} bindMesh(std::vector< std::vector<unsigned int> >  faces,\textcolor{keywordtype}{bool} centre= \textcolor{keyword}{false}, \textcolor{keywordtype}{bool} inverse = \textcolor{keyword}{false})\{\}}
\DoxyCodeLine{146     \textcolor{keyword}{virtual} \textcolor{keywordtype}{void} initLifeBar()\{\}}
\DoxyCodeLine{147     \textcolor{keyword}{virtual} \textcolor{keywordtype}{bool} updateLifeBar(\textcolor{keywordtype}{double} deltaTime)\{\}}
\DoxyCodeLine{148     \textcolor{keyword}{virtual} QVector3D setNormalToCentreCircle(QVector3D vec, QVector3D centre, \textcolor{keywordtype}{bool} inverse)\{\};}
\DoxyCodeLine{149 }
\DoxyCodeLine{150 }
\DoxyCodeLine{151     \textcolor{keywordtype}{void} \mbox{\hyperlink{class_geometry_engine_ae96763d291025a22af677aab09cc6878}{initCubeGeometry}}();}
\DoxyCodeLine{152     \textcolor{keywordtype}{void} \mbox{\hyperlink{class_geometry_engine_a625e7bde8829b93ba88806f871adf19a}{initPlanegeometry}}(\textcolor{keywordtype}{float} Xmin=-\/1,\textcolor{keywordtype}{float} Ymin=-\/1,\textcolor{keywordtype}{float} Xmax=1,\textcolor{keywordtype}{float} Ymax=1,\textcolor{keywordtype}{float} centreX =0, \textcolor{keywordtype}{float} centreY=0);}
\DoxyCodeLine{153     \textcolor{keywordtype}{void} \mbox{\hyperlink{class_geometry_engine_ab6bb9ac1e69024f070bdc12d8aa0b1ee}{initCurvedPlanegeometry}}(\textcolor{keywordtype}{float} Xmin,\textcolor{keywordtype}{float} Ymin,\textcolor{keywordtype}{float} Xmax,\textcolor{keywordtype}{float} Ymax,\textcolor{keywordtype}{bool} collisionActivated);}
\DoxyCodeLine{154 }
\DoxyCodeLine{155     \textcolor{keywordtype}{void} \mbox{\hyperlink{class_geometry_engine_a7664fe7a3be904c9d2db587720aaac5a}{setPrecisionTexture}}(\textcolor{keywordtype}{float} val);}
\DoxyCodeLine{156 }
\DoxyCodeLine{157 \textcolor{keyword}{protected}:}
\DoxyCodeLine{158 }
\DoxyCodeLine{159     std::vector<QVector3D>  vertex;}
\DoxyCodeLine{160 }
\DoxyCodeLine{161     QVector3D Min = QVector3D(0,0,0);}
\DoxyCodeLine{162     QVector3D Max = QVector3D(0,0,0);}
\DoxyCodeLine{163 }
\DoxyCodeLine{164     \textcolor{keywordtype}{void} subdivisePlan(\textcolor{keywordtype}{int} x, \textcolor{keywordtype}{int} y,  \mbox{\hyperlink{struct_vertex_data}{VertexData}} vertices[],\textcolor{keywordtype}{float} Xmin,\textcolor{keywordtype}{float} Ymin,\textcolor{keywordtype}{float} Xmax,\textcolor{keywordtype}{float} Ymax,\textcolor{keywordtype}{float} centreX =0, \textcolor{keywordtype}{float} centreY=0);\textcolor{comment}{//,std::string nameWeightMap );}}
\DoxyCodeLine{165     \textcolor{keywordtype}{void} subdiviseCurvedPlan(\textcolor{keywordtype}{int} x, \textcolor{keywordtype}{int} y, \mbox{\hyperlink{struct_vertex_data}{VertexData}} vertices[], \textcolor{keywordtype}{float} Xmin=-\/1,\textcolor{keywordtype}{float} Ymin=-\/1,\textcolor{keywordtype}{float} Xmax=1,\textcolor{keywordtype}{float} Ymax=1);}
\DoxyCodeLine{166 }
\DoxyCodeLine{167     \textcolor{keywordtype}{void} TriangleStripForPlan(\textcolor{keywordtype}{int} x, \textcolor{keywordtype}{int} y,GLushort indices[]);}
\DoxyCodeLine{168     \textcolor{keywordtype}{void} TriangleListForPlan(\textcolor{keywordtype}{int} x, \textcolor{keywordtype}{int} y,GLushort indices[]);}
\DoxyCodeLine{169     \textcolor{keywordtype}{void} updatePlanegeometry(\textcolor{keywordtype}{float} Xmin,\textcolor{keywordtype}{float} Ymin,\textcolor{keywordtype}{float} Xmax,\textcolor{keywordtype}{float} Ymax, \textcolor{keywordtype}{float} centreX =0, \textcolor{keywordtype}{float} centreY=0);}
\DoxyCodeLine{170     \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} convertStripToTriangle(GLushort indicesIn[], GLushort indicesOut[], \textcolor{keywordtype}{int} size);}
\DoxyCodeLine{171 }
\DoxyCodeLine{172     std::vector<QVector3D> getVertex();}
\DoxyCodeLine{173 }
\DoxyCodeLine{174     \textcolor{keywordtype}{int} precisionX = 101; \textcolor{comment}{// attention! une valeur trop haute provoque}}
\DoxyCodeLine{175     \textcolor{keywordtype}{int} precisionY= 101;  \textcolor{comment}{// un dépassement de capacité (size > sizemax of array)}}
\DoxyCodeLine{176 }
\DoxyCodeLine{177 }
\DoxyCodeLine{178 }
\DoxyCodeLine{179     \textcolor{keywordtype}{void} initBB(std::vector<QVector3D> vertex);}
\DoxyCodeLine{180     \textcolor{keywordtype}{void} initBB(\mbox{\hyperlink{struct_vertex_data}{VertexData}} vertices[], \textcolor{keywordtype}{int} i);}
\DoxyCodeLine{181     \textcolor{keywordtype}{void} setBBMin(QVector3D v);}
\DoxyCodeLine{182     \textcolor{keywordtype}{void} setBBMax(QVector3D v);}
\DoxyCodeLine{183 }
\DoxyCodeLine{184   \textcolor{comment}{//  float getHauteur(QVector2D coordText);}}
\DoxyCodeLine{185 \textcolor{keyword}{public}:}
\DoxyCodeLine{186 }
\DoxyCodeLine{187 }
\DoxyCodeLine{188     QVector3D \mbox{\hyperlink{class_geometry_engine_af8f9feeaeeb4624d47d0a87a13929fbc}{findCoordmesh}}(\mbox{\hyperlink{class_geometry_engine}{GeometryEngine}} *geo, QMatrix4x4 objM,  QMatrix4x4 ourM,  \textcolor{keywordtype}{bool} \&collision, QVector3D \& mesh);}
\DoxyCodeLine{189     QVector3D getNormal();}
\DoxyCodeLine{190     QVector3D getNormal(QVector3D vertex);}
\DoxyCodeLine{191     QVector3D recallageCollision(\mbox{\hyperlink{class_geometry_engine}{GeometryEngine}} *geoB, \textcolor{keywordtype}{int} instance=-\/1);}
\DoxyCodeLine{192     \textcolor{keywordtype}{void} resetBB();}
\DoxyCodeLine{193     \textcolor{keywordtype}{bool} ifNoeudVide();}
\DoxyCodeLine{194     \textcolor{keywordtype}{void} remplaceBB(\mbox{\hyperlink{class_geometry_engine}{GeometryEngine}} *geo);}
\DoxyCodeLine{195     \textcolor{keywordtype}{void} remplaceBB(QVector3D m,QVector3D M);}
\DoxyCodeLine{196     \textcolor{keywordtype}{void} updateBB(QMatrix4x4 m, QMatrix4x4 lastM =QMatrix4x4(), QMatrix4x4 courante = QMatrix4x4());}
\DoxyCodeLine{197     \textcolor{keywordtype}{void} ajustBB(\mbox{\hyperlink{class_geometry_engine}{GeometryEngine}} *geo);}
\DoxyCodeLine{198     \textcolor{keywordtype}{void} ajustBB(QVector3D min, QVector3D max);}
\DoxyCodeLine{199 }
\DoxyCodeLine{200     \textcolor{keywordtype}{bool} intersect(\mbox{\hyperlink{class_geometry_engine}{GeometryEngine}} *geo);}
\DoxyCodeLine{201     \textcolor{keywordtype}{bool} internintersect(\mbox{\hyperlink{class_geometry_engine}{GeometryEngine}} *geo ,\textcolor{keywordtype}{int} \&numInstence, QMatrix4x4 AllTransform = QMatrix4x4());}
\DoxyCodeLine{202     \textcolor{keywordtype}{bool} internintersectInstenced(\mbox{\hyperlink{class_geometry_engine}{GeometryEngine}} *geo ,\textcolor{keywordtype}{int} \&numInstence, QMatrix4x4 AllTransform = QMatrix4x4());}
\DoxyCodeLine{203     QVector3D \mbox{\hyperlink{class_geometry_engine_ad2c612ba9cd4b65dd9822f82e84f0ae4}{gestionCollision}}(\mbox{\hyperlink{class_geometry_engine}{GeometryEngine}} *geo,QVector3D vec);}
\DoxyCodeLine{204     QVector3D \mbox{\hyperlink{class_geometry_engine_ad2c612ba9cd4b65dd9822f82e84f0ae4}{gestionCollision}}(QVector3D vec, QVector3D mesh);}
\DoxyCodeLine{205     QVector3D \mbox{\hyperlink{class_geometry_engine_ad2c612ba9cd4b65dd9822f82e84f0ae4}{gestionCollision}}(\mbox{\hyperlink{class_geometry_engine}{GeometryEngine}} *geo,QVector3D vec, \textcolor{keywordtype}{int} numInstenced);}
\DoxyCodeLine{206 }
\DoxyCodeLine{207     QVector3D mapCoordChanged(QVector3D vec,QMatrix4x4 objM,QMatrix4x4 ourM);}
\DoxyCodeLine{208 }
\DoxyCodeLine{209     \textcolor{keywordtype}{void} \mbox{\hyperlink{class_geometry_engine_a9f942a1029de48db6466e538d8ffbecc}{addInstancedGrass}}(\textcolor{keywordtype}{float} ratioArbre=0.42, QVector3D min=QVector3D(-\/13,-\/13,0), QVector3D max=QVector3D(13,13,0));}
\DoxyCodeLine{210     \textcolor{keywordtype}{void} gestionBoundingBoxForInstance( QVector3D min, QVector3D max);}
\DoxyCodeLine{211     \textcolor{keywordtype}{void} coordLastCollisionUpdateForMeshsCollision(\mbox{\hyperlink{class_geometry_engine}{GeometryEngine}} *geo, QMatrix4x4 objM);}
\DoxyCodeLine{212 }
\DoxyCodeLine{213     \textcolor{keyword}{static} QVector3D  calcBBMin(QVector3D \textcolor{keyword}{const} \& last, QVector3D \textcolor{keyword}{const} \& min);}
\DoxyCodeLine{214     \textcolor{keyword}{static} QVector3D  calcBBMax(QVector3D \textcolor{keyword}{const} \& last, QVector3D \textcolor{keyword}{const} \& max);}
\DoxyCodeLine{215 \};}
\DoxyCodeLine{216 }
\DoxyCodeLine{217 \textcolor{preprocessor}{\#endif }\textcolor{comment}{// GEOMETRYENGINE\_H}}

\end{DoxyCode}
