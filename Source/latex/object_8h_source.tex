\hypertarget{object_8h_source}{}\doxysection{object.\+h}
\mbox{\hyperlink{object_8h}{Aller Ã  la documentation de ce fichier.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{1 \textcolor{preprocessor}{\#ifndef OBJECT\_H}}
\DoxyCodeLine{2 \textcolor{preprocessor}{\#define OBJECT\_H}}
\DoxyCodeLine{3 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{transform_8h}{transform.h}}"{}}}
\DoxyCodeLine{4 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{geometryengine_8h}{geometryengine.h}}"{}}}
\DoxyCodeLine{5 \textcolor{comment}{//\#include "{}meshobject.h"{}}}
\DoxyCodeLine{6 \textcolor{preprocessor}{\#include <QVector3D>}}
\DoxyCodeLine{7 \textcolor{preprocessor}{\#include <QVector4D>}}
\DoxyCodeLine{8 \textcolor{preprocessor}{\#include <QQuaternion>}}
\DoxyCodeLine{9 \textcolor{preprocessor}{\#include <QVector>}}
\DoxyCodeLine{10 \textcolor{preprocessor}{\#include <QOpenGLTexture>}}
\DoxyCodeLine{11 }
\DoxyCodeLine{12 \textcolor{preprocessor}{\#include <QOpenGLWidget>}}
\DoxyCodeLine{13 \textcolor{preprocessor}{\#include <QObject>}}
\DoxyCodeLine{14 \textcolor{preprocessor}{\#include <QKeyEvent>}}
\DoxyCodeLine{15 }
\DoxyCodeLine{25 \textcolor{keyword}{class }\mbox{\hyperlink{class_object}{Object}}: \textcolor{keyword}{public} QObject}
\DoxyCodeLine{26 \{}
\DoxyCodeLine{27     Q\_OBJECT}
\DoxyCodeLine{28 }
\DoxyCodeLine{30 \textcolor{keyword}{public}:}
\DoxyCodeLine{31     \mbox{\hyperlink{class_geometry_engine}{GeometryEngine}} *\mbox{\hyperlink{class_object_a05a745798164c71d2ea9431535fe228e}{geo}} = \textcolor{keyword}{new} \mbox{\hyperlink{class_geometry_engine}{GeometryEngine}}();}
\DoxyCodeLine{32     \textcolor{keyword}{static} \textcolor{keywordtype}{bool}  animate;}
\DoxyCodeLine{33     \mbox{\hyperlink{class_object}{Object}} *Monde;}
\DoxyCodeLine{34  QVector<QOpenGLShaderProgram*> allShader;}
\DoxyCodeLine{35     \textcolor{keywordtype}{bool} instanced = \textcolor{keyword}{false};}
\DoxyCodeLine{36 }
\DoxyCodeLine{37  \textcolor{keywordtype}{float} transfertForce = 0; \textcolor{comment}{//[0,1]}}
\DoxyCodeLine{38 \textcolor{keyword}{protected}:}
\DoxyCodeLine{39     \mbox{\hyperlink{class_transform}{Transform}} t = \mbox{\hyperlink{class_transform}{Transform}}();}
\DoxyCodeLine{40     \mbox{\hyperlink{class_transform}{Transform}} animation = \mbox{\hyperlink{class_transform}{Transform}}();}
\DoxyCodeLine{41     QOpenGLTexture *texture;}
\DoxyCodeLine{42     \textcolor{keywordtype}{bool} ifTexture =\textcolor{keyword}{false};}
\DoxyCodeLine{43     QVector< Object*> enfants= QVector<Object*>();}
\DoxyCodeLine{44     \mbox{\hyperlink{class_object}{Object}} *parent;}
\DoxyCodeLine{45     QMatrix4x4 transf = QMatrix4x4();}
\DoxyCodeLine{46     \textcolor{keywordtype}{bool} canJump = \textcolor{keyword}{true};}
\DoxyCodeLine{47     \textcolor{keywordtype}{bool} lumiere = \textcolor{keyword}{false};}
\DoxyCodeLine{48     QVector3D dirView = QVector3D(0,1,0);}
\DoxyCodeLine{49     QMatrix4x4 projection = QMatrix4x4();}
\DoxyCodeLine{50     QSet<int> pressedKeys;}
\DoxyCodeLine{51     QOpenGLShaderProgram *shader;}
\DoxyCodeLine{52     \mbox{\hyperlink{class_transform}{Transform}} saveAlltransform = \mbox{\hyperlink{class_transform}{Transform}}();}
\DoxyCodeLine{53     QString Name= \textcolor{stringliteral}{"{}"{}};}
\DoxyCodeLine{54 }
\DoxyCodeLine{55 }
\DoxyCodeLine{57 }
\DoxyCodeLine{58 \textcolor{keyword}{public}:}
\DoxyCodeLine{59 }
\DoxyCodeLine{63     \mbox{\hyperlink{class_object_a40860402e64d8008fb42329df7097cdb}{Object}}();}
\DoxyCodeLine{69     \mbox{\hyperlink{class_object_a353e91629d720cdf9966f8b501912b5f}{Object}}(\mbox{\hyperlink{class_transform}{Transform}} tt,\mbox{\hyperlink{class_transform}{Transform}} anim):t(tt),animation(anim)\{\}}
\DoxyCodeLine{70 }
\DoxyCodeLine{71 }
\DoxyCodeLine{73     \textcolor{keywordtype}{void} \mbox{\hyperlink{class_object_ad1a8739af1e2dc9718250b800466f05e}{updateMesh}}(\mbox{\hyperlink{class_geometry_engine}{GeometryEngine}} *ge)\{}
\DoxyCodeLine{74         \mbox{\hyperlink{class_object_a05a745798164c71d2ea9431535fe228e}{geo}} = ge;}
\DoxyCodeLine{75     \}}
\DoxyCodeLine{76     \textcolor{keywordtype}{void} setTexture(QOpenGLTexture *txtr)\{}
\DoxyCodeLine{77         \textcolor{keywordflow}{if}(txtr !=NULL)\{}
\DoxyCodeLine{78             texture = txtr;}
\DoxyCodeLine{79             ifTexture =\textcolor{keyword}{true};}
\DoxyCodeLine{80             txtr-\/>setMinificationFilter(QOpenGLTexture::Nearest);}
\DoxyCodeLine{81             txtr-\/>setMagnificationFilter(QOpenGLTexture::Linear);}
\DoxyCodeLine{82             txtr-\/>setWrapMode(QOpenGLTexture::Repeat);}
\DoxyCodeLine{83         \}}
\DoxyCodeLine{84         \textcolor{keywordflow}{else}\{}
\DoxyCodeLine{85             ifTexture =\textcolor{keyword}{false};}
\DoxyCodeLine{86         \}\}}
\DoxyCodeLine{87     \textcolor{keywordtype}{void} setShader(QOpenGLShaderProgram * shad)\{}
\DoxyCodeLine{88         shader = shad;}
\DoxyCodeLine{89     \}}
\DoxyCodeLine{90     \textcolor{keywordtype}{void} addChild(\mbox{\hyperlink{class_object}{Object}} * enfant)\{}
\DoxyCodeLine{91         enfants.append(enfant);}
\DoxyCodeLine{92         enfant-\/>SetParent(\textcolor{keyword}{this});}
\DoxyCodeLine{93     \}}
\DoxyCodeLine{94 }
\DoxyCodeLine{95     \textcolor{keywordtype}{void} SetParent(\mbox{\hyperlink{class_object}{Object}} * pa)\{}
\DoxyCodeLine{96         parent = pa;}
\DoxyCodeLine{97     \}}
\DoxyCodeLine{98 }
\DoxyCodeLine{99 }
\DoxyCodeLine{100     \textcolor{keywordtype}{void} setTransf(QMatrix4x4 m)\{}
\DoxyCodeLine{101         transf= m;}
\DoxyCodeLine{102     \}}
\DoxyCodeLine{103     QMatrix4x4 getTransf()\{}
\DoxyCodeLine{104         \textcolor{keywordflow}{return} transf;}
\DoxyCodeLine{105     \}}
\DoxyCodeLine{106 }
\DoxyCodeLine{107     \textcolor{keywordtype}{void} setLumiere()\{}
\DoxyCodeLine{108         lumiere = \textcolor{keyword}{true};}
\DoxyCodeLine{109     \}}
\DoxyCodeLine{110 }
\DoxyCodeLine{111 }
\DoxyCodeLine{113     \textcolor{keywordtype}{void} \mbox{\hyperlink{class_object_af1a19afefb5494e168e04f1e733d8146}{calculsInstanced}}(\textcolor{keywordtype}{double} deltaTime,QMatrix4x4 m);}
\DoxyCodeLine{114     \textcolor{keywordtype}{void} setName( QString n)\{}
\DoxyCodeLine{115     Name=n;}
\DoxyCodeLine{116 \}}
\DoxyCodeLine{117 }
\DoxyCodeLine{118 }
\DoxyCodeLine{119             \textcolor{keyword}{protected}:}
\DoxyCodeLine{120     \textcolor{keywordtype}{void} chargerTextureForShader()\{}
\DoxyCodeLine{121         \textcolor{keywordflow}{if}(ifTexture)\{}
\DoxyCodeLine{122             texture-\/>bind(10);}
\DoxyCodeLine{123             shader-\/>setUniformValue(\textcolor{stringliteral}{"{}textureScene"{}},10);}
\DoxyCodeLine{124         \}}
\DoxyCodeLine{125         \textcolor{comment}{//ifTexture.bind(5);}}
\DoxyCodeLine{126         shader-\/>setUniformValue(\textcolor{stringliteral}{"{}textureSample"{}}, ifTexture);}
\DoxyCodeLine{127 }
\DoxyCodeLine{128 \textcolor{comment}{//        glDrawArraysInstanced}}
\DoxyCodeLine{129     \}}
\DoxyCodeLine{130 }
\DoxyCodeLine{131 }
\DoxyCodeLine{132 }
\DoxyCodeLine{133 }
\DoxyCodeLine{134     QMatrix4x4 calculMatrice(\textcolor{keywordtype}{double} deltaTime)\{}
\DoxyCodeLine{135         QMatrix4x4 a;}
\DoxyCodeLine{136         \textcolor{keywordflow}{if}(animate)}
\DoxyCodeLine{137             a = t.\mbox{\hyperlink{class_transform_a64a2fbd4261bb71ac9e7d37ee7bd0864}{doAnimation}}(\&animation, deltaTime);}
\DoxyCodeLine{138         \textcolor{keywordflow}{else}}
\DoxyCodeLine{139             a = t.\mbox{\hyperlink{class_transform_a9c07946c92e291404f4b584c6dd5c7e1}{doTransformation}}();}
\DoxyCodeLine{140         \textcolor{keywordflow}{return} a;}
\DoxyCodeLine{141     \}}
\DoxyCodeLine{142     \textcolor{keyword}{virtual} QMatrix4x4 ApplyMatriceForShader( \textcolor{keywordtype}{double} deltaTime, QMatrix4x4 m)\{}
\DoxyCodeLine{143         QMatrix4x4 anim= calculMatrice( deltaTime);}
\DoxyCodeLine{144         shader-\/>setUniformValue(\textcolor{stringliteral}{"{}transform\_Matrix"{}}, m*anim);}
\DoxyCodeLine{145         \textcolor{keywordflow}{return} m*anim;}
\DoxyCodeLine{146     \}}
\DoxyCodeLine{147 }
\DoxyCodeLine{148 }
\DoxyCodeLine{149     \textcolor{keyword}{virtual} QMatrix4x4 chargeMatriceForShader( \textcolor{keywordtype}{double} deltaTime)\{}
\DoxyCodeLine{150 }
\DoxyCodeLine{151         QMatrix4x4 a =  calculMatrice(deltaTime);}
\DoxyCodeLine{152 }
\DoxyCodeLine{153         shader-\/>setUniformValue(\textcolor{stringliteral}{"{}transform\_Matrix"{}}, a);}
\DoxyCodeLine{154         \textcolor{keywordflow}{return} a;}
\DoxyCodeLine{155     \}}
\DoxyCodeLine{156 }
\DoxyCodeLine{157     \textcolor{keyword}{virtual} QMatrix4x4 chargeMatriceForShader( \textcolor{keywordtype}{double} deltaTime, QMatrix4x4 m)\{}
\DoxyCodeLine{158         QMatrix4x4 anim= calculMatrice(deltaTime);}
\DoxyCodeLine{159         shader-\/>setUniformValue(\textcolor{stringliteral}{"{}transform\_Matrix"{}}, m*anim);}
\DoxyCodeLine{160         \textcolor{keywordflow}{return} m*anim;}
\DoxyCodeLine{161     \}}
\DoxyCodeLine{162 }
\DoxyCodeLine{163 \textcolor{keyword}{public}:}
\DoxyCodeLine{164     \textcolor{keywordtype}{void} transfertDeForce(QVector3D direction);}
\DoxyCodeLine{165 }
\DoxyCodeLine{171     \textcolor{keyword}{virtual} \textcolor{keywordtype}{void}  \mbox{\hyperlink{class_object_a4c31a5390f2e48e086d76edb585a61ff}{updateScene}}( \textcolor{keywordtype}{double} deltaTime =1, QMatrix4x4 m= QMatrix4x4());}
\DoxyCodeLine{172     \textcolor{keywordtype}{void} \mbox{\hyperlink{class_object_ae2e1554452085bb630c37ad8d5ede781}{findCollision}}( \mbox{\hyperlink{class_object}{Object}} *obj,QMatrix4x4 anim,  QMatrix4x4 t);}
\DoxyCodeLine{173     \textcolor{keywordtype}{void} updateBB();}
\DoxyCodeLine{174 }
\DoxyCodeLine{175     \mbox{\hyperlink{class_object}{Object}}* getRacine();}
\DoxyCodeLine{176 }
\DoxyCodeLine{177     \textcolor{keyword}{virtual} \textcolor{keywordtype}{void} addShader(QOpenGLShaderProgram * shader);}
\DoxyCodeLine{178 }
\DoxyCodeLine{179 signals:}
\DoxyCodeLine{180    \textcolor{keywordtype}{void} viewDirChanged(QVector3D vec);}
\DoxyCodeLine{181    \textcolor{keywordtype}{void} emitPosition(QVector3D vec,QMatrix4x4 objM);}
\DoxyCodeLine{182    \textcolor{keywordtype}{void} emitTree(QVector3D);}
\DoxyCodeLine{183 \textcolor{keyword}{public} slots:}
\DoxyCodeLine{184     \textcolor{keywordtype}{void} controleMouvements(QKeyEvent *event);}
\DoxyCodeLine{185     \textcolor{keywordtype}{void} getDirView(QVector3D dirView);}
\DoxyCodeLine{186     \textcolor{keywordtype}{void} getProjection(QMatrix4x4 proj);}
\DoxyCodeLine{187     \textcolor{keywordtype}{void} controleRotation(QKeyEvent *event);}
\DoxyCodeLine{188     \textcolor{keywordtype}{void} keyPressedChangedMove(QEvent * event);}
\DoxyCodeLine{189     \textcolor{keywordtype}{void} keyPressedChangedRotate(QEvent * event);}
\DoxyCodeLine{190 }
\DoxyCodeLine{191     \textcolor{keywordtype}{void} mapCoordChanged(QVector3D vec,  QMatrix4x4 objM);}
\DoxyCodeLine{192 }
\DoxyCodeLine{193     \textcolor{keywordtype}{void} updateTree(QVector3D vec);}
\DoxyCodeLine{194 }
\DoxyCodeLine{195 \};}
\DoxyCodeLine{196 }
\DoxyCodeLine{197 }
\DoxyCodeLine{198 \textcolor{preprocessor}{\#endif }\textcolor{comment}{// OBJECT\_H}}

\end{DoxyCode}
