\hypertarget{mobileobj_8h_source}{}\doxysection{mobileobj.\+h}
\mbox{\hyperlink{mobileobj_8h}{Aller à la documentation de ce fichier.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{1 \textcolor{preprocessor}{\#ifndef MOBILEOBJ\_H}}
\DoxyCodeLine{2 \textcolor{preprocessor}{\#define MOBILEOBJ\_H}}
\DoxyCodeLine{3 }
\DoxyCodeLine{4 \textcolor{preprocessor}{\#include <QVector3D>}}
\DoxyCodeLine{5 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{transform_8h}{transform.h}}"{}}}
\DoxyCodeLine{6 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{geometryengine_8h}{geometryengine.h}}"{}}}
\DoxyCodeLine{7 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{object_8h}{object.h}}"{}}}
\DoxyCodeLine{8 }
\DoxyCodeLine{18 \textcolor{keyword}{class }\mbox{\hyperlink{class_mobile_obj}{MobileObj}}  : \textcolor{keyword}{public} \mbox{\hyperlink{class_object}{Object}}}
\DoxyCodeLine{19 \{}
\DoxyCodeLine{20 Q\_OBJECT}
\DoxyCodeLine{21 }
\DoxyCodeLine{22 \textcolor{keyword}{public}:}
\DoxyCodeLine{23 }
\DoxyCodeLine{27     \mbox{\hyperlink{class_mobile_obj_a7d2898370690449289a6bbd0fa473fae}{MobileObj}}():\mbox{\hyperlink{class_object}{Object}}()\{\}}
\DoxyCodeLine{28 }
\DoxyCodeLine{29 }
\DoxyCodeLine{35     \mbox{\hyperlink{class_mobile_obj_a1bf4c559389157e37cb6099aa5ed87ba}{MobileObj}}(\mbox{\hyperlink{class_transform}{Transform}} tt,\mbox{\hyperlink{class_transform}{Transform}} anim):\mbox{\hyperlink{class_object}{Object}}(tt,anim)\{\}}
\DoxyCodeLine{36 }
\DoxyCodeLine{37 }
\DoxyCodeLine{38     \textcolor{keywordtype}{float} facteurGravite =300;}
\DoxyCodeLine{39     \textcolor{keywordtype}{float} facteurCynetique = 50;}
\DoxyCodeLine{40 }
\DoxyCodeLine{41 }
\DoxyCodeLine{48     \textcolor{keywordtype}{float} \mbox{\hyperlink{class_mobile_obj_a083fb83731337c55a2216560e78cfbb8}{dist2Points}}(QVector3D pt1, QVector3D pt2)\{}
\DoxyCodeLine{49         \textcolor{keywordflow}{return}}
\DoxyCodeLine{50                 pt1.distanceToPoint(pt2);}
\DoxyCodeLine{51     \};}
\DoxyCodeLine{52 }
\DoxyCodeLine{57     \textcolor{keywordtype}{void} \mbox{\hyperlink{class_mobile_obj_aaa399ff61b596074e4514c042d5eb31b}{addGravite}}(\textcolor{keywordtype}{double} deltaTime)\{}
\DoxyCodeLine{58 }
\DoxyCodeLine{59 }
\DoxyCodeLine{60         \textcolor{keywordtype}{float} dist = \mbox{\hyperlink{class_mobile_obj_a083fb83731337c55a2216560e78cfbb8}{dist2Points}}(\mbox{\hyperlink{class_object_a05a745798164c71d2ea9431535fe228e}{geo}}-\/>coordLastCollision, \mbox{\hyperlink{class_transform_a5470db871eb7881e9ff90d9020e4ca4e}{Transform::extracteTranslate}}(t.\mbox{\hyperlink{class_transform_a9c07946c92e291404f4b584c6dd5c7e1}{doTransformation}}()));}
\DoxyCodeLine{61         \textcolor{keywordflow}{if}(dist >1.1)\{}
\DoxyCodeLine{62 }
\DoxyCodeLine{63 }
\DoxyCodeLine{64         \textcolor{comment}{//l'objet subit la gravité}}
\DoxyCodeLine{65         \mbox{\hyperlink{class_transform}{Transform}} G = \mbox{\hyperlink{class_transform}{Transform}}();}
\DoxyCodeLine{66         \textcolor{comment}{//QVector3D(0,0,-\/(pow(1.1,(deltaTime/facteurGravite)))/10);}}
\DoxyCodeLine{67         G.setTranslate(0,0,-\/(pow(1.1,(deltaTime/facteurGravite)))/10);}
\DoxyCodeLine{68         animation = animation.\mbox{\hyperlink{class_transform_a1ffb00dd51d8fe95805f95fd42423907}{combine\_with}}(G, deltaTime);}
\DoxyCodeLine{69 }
\DoxyCodeLine{70         \}}
\DoxyCodeLine{71         \textcolor{comment}{//l'objet est freiner}}
\DoxyCodeLine{72 }
\DoxyCodeLine{73         animation.setTranslate(pow(0.9,deltaTime/facteurCynetique));}
\DoxyCodeLine{74         \textcolor{comment}{//animation.setRotation(0.75);}}
\DoxyCodeLine{75         animation.setTranslate(Transform::convergeZero(animation.getTranslate()));}
\DoxyCodeLine{76 }
\DoxyCodeLine{77     \}}
\DoxyCodeLine{78 }
\DoxyCodeLine{83     \textcolor{keywordtype}{void} \mbox{\hyperlink{class_mobile_obj_ae48c9fa52a7877fa7564c0f46b2119f9}{testCollision}}(QMatrix4x4 m = QMatrix4x4())\{}
\DoxyCodeLine{84         QMatrix4x4 anim = animation.\mbox{\hyperlink{class_transform_a9c07946c92e291404f4b584c6dd5c7e1}{doTransformation}}();}
\DoxyCodeLine{85         Monde-\/>\mbox{\hyperlink{class_object_ae2e1554452085bb630c37ad8d5ede781}{findCollision}}(\textcolor{keyword}{this},anim,m);}
\DoxyCodeLine{86     \}}
\DoxyCodeLine{87 }
\DoxyCodeLine{93     \textcolor{keywordtype}{void}  \mbox{\hyperlink{class_mobile_obj_ab7d467bb3e8b2de7e33a1b2a466b8eb7}{updateScene}}( \textcolor{keywordtype}{double} deltaTime)\{}
\DoxyCodeLine{94         \textcolor{keywordflow}{if}(animate)\{}
\DoxyCodeLine{95             \mbox{\hyperlink{class_mobile_obj_aaa399ff61b596074e4514c042d5eb31b}{addGravite}}( deltaTime);}
\DoxyCodeLine{96             \mbox{\hyperlink{class_mobile_obj_ae48c9fa52a7877fa7564c0f46b2119f9}{testCollision}}();}
\DoxyCodeLine{97         \}}
\DoxyCodeLine{98         QMatrix4x4 m= chargeMatriceForShader(deltaTime);}
\DoxyCodeLine{99 }
\DoxyCodeLine{100         \mbox{\hyperlink{class_object_a4c31a5390f2e48e086d76edb585a61ff}{Object::updateScene}}(deltaTime, m);}
\DoxyCodeLine{101 }
\DoxyCodeLine{102     \}}
\DoxyCodeLine{110     \textcolor{keywordtype}{void}  \mbox{\hyperlink{class_mobile_obj_ae9a430fba11e5d69a475f897859d3611}{updateScene}}(\textcolor{keywordtype}{double} deltaTime,QMatrix4x4 lastM)\{}
\DoxyCodeLine{111         \textcolor{keywordflow}{if}(animate)\{}
\DoxyCodeLine{112             \mbox{\hyperlink{class_mobile_obj_aaa399ff61b596074e4514c042d5eb31b}{addGravite}}( deltaTime);}
\DoxyCodeLine{113             \mbox{\hyperlink{class_mobile_obj_ae48c9fa52a7877fa7564c0f46b2119f9}{testCollision}}(lastM);}
\DoxyCodeLine{114         \}}
\DoxyCodeLine{115 }
\DoxyCodeLine{116         \mbox{\hyperlink{class_object_a4c31a5390f2e48e086d76edb585a61ff}{Object::updateScene}}(deltaTime, lastM);}
\DoxyCodeLine{117 }
\DoxyCodeLine{118     \}}
\DoxyCodeLine{119 \};}
\DoxyCodeLine{120 }
\DoxyCodeLine{121 }
\DoxyCodeLine{122 }
\DoxyCodeLine{123 \textcolor{preprocessor}{\#endif }\textcolor{comment}{// MOBILEOBJ\_H}}

\end{DoxyCode}
